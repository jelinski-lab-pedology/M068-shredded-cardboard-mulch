dplyr::select('date','total_time_hr')
View(irrigation)
irrigation <- read.csv(here::here("00-data", "b-prepared",
"20250530_SCM-irrigation.csv"), header = TRUE)
str(irrigation)
irrigation <- read.csv(here::here("00-data", "b-prepared",
"20250618_SCM-irrigation.csv"), header = TRUE)
irrigation <- read.csv(here::here("00-data", "b-prepared",
"20250618_SCM-irrigation.csv"), header = TRUE)
str(irrigation)
test <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y"))
str(test)
ggplot(irrigation, aes(x = date, y = irrigation_in)) + geom_point()
ggplot(irrigation, aes(x = date, y = irrigation_in)) + geom_bar()
ggplot(irrigation, aes(x = date, y = irrigation_in)) + geom_point()
irrigation <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymddate)))
irrigation <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymddate))
irrigation <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymd(date)))
View(irrigation)
test <- irrigation %>%
test <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymd(sample_date)),
month = lubridate::month(date),
week = lubridate::isoweek(ymd(date)))
test <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymd(date)),
month = lubridate::month(date),
week = lubridate::isoweek(ymd(date)))
View(test)
View(irrigation)
irrigation <- read.csv(here::here("00-data", "b-prepared",
"20250618_SCM-irrigation.csv"), header = TRUE)
irrigation <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymd(date)),
month = lubridate::month(date),
week = lubridate::isoweek(ymd(date)))
ggplot(irrigation, aes(x = week, y = irrigation_in)) + geom_point() + facet_grid(~year)
ggplot() +
geom_line(irrigation, aes(x = week, y = irrigation_in)) + facet_grid(~year)
ggplot() +
geom_point(irrigation, aes(x = week, y = irrigation_in)) + facet_grid(~year)
ggplot() +
geom_line(data = subset(irrigation, year == "2023"),
aes(x = date,
y = irrigation_in,
color = "purple")) +
geom_line(data = subset(temp_precip_day, year == "2023" &
month > 4 &
month < 11),
aes(x = date,
y = precip_in,
color = "blue")) +
theme_bw()
ggplot() +
geom_point(data = subset(irrigation, year == "2023"),
aes(x = date,
y = irrigation_in,
color = "purple")) +
geom_line(data = subset(temp_precip_day, year == "2023" &
month > 4 &
month < 11),
aes(x = date,
y = precip_in,
color = "blue")) +
theme_bw()
ggplot() +
geom_point(data = subset(irrigation, year == "2023"),
aes(x = week,
y = irrigation_in,
color = "purple")) +
geom_line(data = subset(temp_precip_day, year == "2023" &
month > 4 &
month < 11),
aes(x = week,
y = precip_in,
color = "blue")) +
theme_bw()
ggplot() +
geom_bar(data = subset(irrigation, year == "2023"),
aes(x = week,
y = irrigation_in,
color = "purple")) +
geom_line(data = subset(temp_precip_day, year == "2023" &
month > 4 &
month < 11),
aes(x = week,
y = precip_in,
color = "blue")) +
theme_bw()
View(irrigation)
test <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y"),
year = lubridate::isoyear(ymd(date)),
month = lubridate::month(date),
week = lubridate::isoweek(ymd(date)),
type = "irrigation") %>%
rename(water_in = irrigation_in)
View(test)
test <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y"),
year = lubridate::isoyear(ymd(date)),
month = lubridate::month(date),
week = lubridate::isoweek(ymd(date)),
type = "irrigation") %>%
rename(water_in = irrigation_in) %>%
dplyr::select('date', 'year', 'month', 'week', 'type', 'water_in')
View(test)
irrigation <- irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y"),
year = lubridate::isoyear(ymd(date)),
month = lubridate::month(date),
week = lubridate::isoweek(ymd(date)),
type = "irrigation") %>%
rename(water_in = irrigation_in) %>%
dplyr::select('date', 'year', 'month', 'week', 'type', 'water_in')
View(irrigation)
precip_day <- temp_precip_day %>%
mutate(type = "precip") %>%
rename(water_in = precip_in) %>%
dplyr::select('date','year','month','week','type','water_in')
View(precip_day)
precip_day <- temp_precip_day %>%
mutate(type = "precip") %>%
rename(water_in = precip_in) %>%
dplyr::select('date','year','month','week','type','water_in') %>%
rbind(irrigation)
soil_temp <- read.csv(here::here("00-data", "b-prepared",
"20250530_SCM-soil-temp.csv"),
header = TRUE)
soil_vwc <- read.csv(here::here("00-data", "b-prepared",
"20250530_SCM-soil-moisture.csv"),
header = TRUE)
soil_temp <- read.csv(here::here("00-data", "b-prepared",
"20250530_SCM-soil-temp.csv"),
header = TRUE)
soil_vwc <- read.csv(here::here("00-data", "b-prepared",
"20250530_SCM-soil-moisture.csv"),
header = TRUE)
soil_vwc_rt <- read.csv(here::here("00-data", "b-prepared",
"20250530_SCM-real time moisture-2023.csv"),
header = TRUE)
drip_irrigation <- read.csv(here::here("00-data", "b-prepared",
"20250618_SCM-irrigation.csv"), header = TRUE)
temp_precip <- read.csv(here::here("00-data", "b-prepared",
"20250618_temp and precip.csv"), header = TRUE)
soil_temp <- soil_temp %>%
dplyr::select('ID', 'block','plot', 'treatment',
'crop', 'date.time', 'temp_C') %>%
mutate_at(c('ID', 'block', 'plot', 'treatment', 'crop'), as.factor) %>%
mutate(date.time = lubridate::as_datetime(date.time,
format = "%m/%d/%Y %H:%M:%S")) %>%
mutate(date = lubridate::date(date.time)) %>%
mutate(year = lubridate::isoyear(ymd_hms(date.time))) %>%
mutate(week = lubridate::isoweek(ymd_hms(date.time))) %>%
mutate(month = lubridate::month(date.time)) %>%
mutate(study_yr = ifelse(year == "2023",1,
ifelse(year == "2024" & month < 5,1,
2)))
soil_temp_day <- soil_temp %>%
group_by(ID, block, plot, treatment, crop, year, study_yr, month, week, date) %>%
summarize(day_max = max(temp_C, na.rm = TRUE),
day_min = min(temp_C, na.rm = TRUE),
day_avg = (day_max + day_min)/2) %>%
ungroup()
soil_temp_trt <- soil_temp_day %>%
group_by(treatment, year, week, month, study_yr, date) %>%
summarize(trt_avg_max = mean(day_max, na.rm = TRUE),
trt_avg_min = mean(day_min, na.rm = TRUE),
trt_avg = (trt_avg_max + trt_avg_min)/2) %>%
ungroup()
# ALERT: there's a weird quirk in the first and last days of the year, where they are part of the week from a different year. So that's worth checking, either to see if there's a better function or to just remove those weirdo dates from the calculation
soil_temp_wk <- soil_temp_day %>%
group_by(treatment, year, study_yr, week) %>%
summarize(wk_avg_max = mean(day_max, na.rm = TRUE),
wk_avg_min = mean(day_min, na.rm = TRUE),
wk_avg = (wk_avg_max + wk_avg_min) /2) %>%
ungroup()
soil_temp_month <- soil_temp_day %>%
group_by(treatment, year, study_yr, month) %>%
summarize(mon_avg_max = mean(day_max, na.rm = TRUE),
mon_avg_min = mean(day_min, na.rm = TRUE),
mon_avg = (mon_avg_max + mon_avg_min) / 2) %>%
ungroup()
soil_temp_season <- soil_temp_day %>%
subset(month > 4 & month < 11) %>%
group_by(treatment, year, study_yr) %>%
summarize(season_avg_max = mean(day_max, na.rm = TRUE),
season_avg_min = mean(day_min, na.rm = TRUE),
season_avg = (season_avg_max + season_avg_min) / 2) %>%
ungroup()
#check with Nic to see if changing trace precip to 0.001 in was appropriate
temp_precip_day <- temp_precip %>%
rename(max_temp_F = Maximum.Temperature.degrees..F.,
min_temp_F = Minimum.Temperature.degrees..F.,
precip_in = Precipitation..inches.,
date = Date) %>%
mutate(date = lubridate::as_date(date, format = "%Y-%m-%d"),
year = as.numeric(lubridate::year(date))) %>%
mutate(month = lubridate::month(date),
week = lubridate::isoweek(ymd(date)),
precip_in = ifelse(precip_in == "T", 0.001, precip_in)) %>%
subset(year == "2023" | year == "2024" | (year == "2025" & month < 5)) %>%
mutate_at(c('max_temp_F', 'min_temp_F','precip_in'), as.numeric) %>%
mutate(max_temp_C = fahrenheit.to.celsius(max_temp_F, round = 2),
min_temp_C = fahrenheit.to.celsius(min_temp_F, round = 2),
precip_mm = convert_precip(precip_in, old_metric = "inches", new_metric = "mm", round = 2),
avg_temp_C = (max_temp_C + min_temp_C)/2) %>%
dplyr::select('date', 'year', 'month', 'week', 'max_temp_C', 'min_temp_C', 'avg_temp_C','precip_in', 'precip_mm')
# ALERT: there's a weird quirk in the first and last days of the year, where they are part of the week from a different year. So that's worth checking, either to see if there's a better function or to just remove those weirdo dates from the calculation
temp_wk <- temp_precip_day %>%
group_by(year, month, week) %>%
summarize(wk_avg_temp_max = mean(max_temp_C, na.rm = TRUE),
wk_avg_temp_min = mean(min_temp_C, na.rm = TRUE),
wk_avg_temp_C = (wk_avg_temp_max + wk_avg_temp_min) /2) %>%
ungroup()
temp_mon <- temp_precip_day %>%
group_by(year, month) %>%
summarize(mon_avg_temp_max = mean(max_temp_C, na.rm = TRUE),
mon_avg_temp_min = mean(min_temp_C, na.rm = TRUE),
mon_avg_temp_C = (mon_avg_temp_max + mon_avg_temp_min) / 2) %>%
ungroup()
temp_season <- temp_precip_day %>%
subset(month > 4 & month < 11) %>%
group_by(year) %>%
summarize(season_avg_temp_max = mean(max_temp_C, na.rm = TRUE),
season_avg_temp_min = mean(min_temp_C, na.rm = TRUE),
season_avg_temp_C = (season_avg_temp_max + season_avg_temp_min) / 2) %>%
ungroup()
temp_yr <- temp_precip_day %>%
group_by(year) %>%
summarize(yr_avg_temp_max = mean(max_temp_C, na.rm = TRUE),
yr_avg_temp_min = mean(min_temp_C, na.rm = TRUE),
yr_avg_temp_C = (yr_avg_temp_max + yr_avg_temp_min) / 2) %>%
ungroup()
drip_irrigation <- drip_irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y"),
year = lubridate::isoyear(ymd(date)),
month = lubridate::month(date),
week = lubridate::isoweek(ymd(date)),
type = "drip") %>%
dplyr::select('date', 'year', 'month', 'week', 'type', 'irrigation_in')
irrigation <- temp_precip_day %>%
mutate(type = "precip") %>%
rename(irrigation_in = precip_in) %>%
dplyr::select('date','year','month','week','type','irrigation_in') %>%
rbind(irrigation)
drip_irrigation <- drip_irrigation %>%
mutate(date = lubridate::as_date(date, format = "%m/%d/%Y"),
year = lubridate::isoyear(ymd(date)),
month = lubridate::month(date),
week = lubridate::isoweek(ymd(date)),
type = "drip") %>%
dplyr::select('date', 'year', 'month', 'week', 'type', 'irrigation_in')
irrigation <- temp_precip_day %>%
mutate(type = "precip") %>%
rename(irrigation_in = precip_in) %>%
dplyr::select('date','year','month','week','type','irrigation_in') %>%
rbind(drip_irrigation)
ggplot(irrigation, x = date, y = irrigation_in, color = type) + geom_bar()
ggplot(irrigation, x = date, y = irrigation_in, color = type) + geom_bar(stat = "identity")
ggplot(irrigation, x = date, y = irrigation_in, fill=as.factor(type)) + geom_bar(stat = "identity")
ggplot(irrigation, x = date, y = irrigation_in, fill=as.factor(type)) + geom_bar()
irrigation_day <- temp_precip_day %>%
mutate(type = "precip") %>%
rename(irrigation_in = precip_in) %>%
dplyr::select('date','year','month','week','type','irrigation_in') %>%
rbind(drip_irrigation)
View(irrigation_day)
irrigation_wk <- irrigation_day %>%
group_by(year, month, week, type) %>%
summarize(irrigation_in_wk = sum(irrigation_in)) %>%
ungroup()
View(irrigation_wk)
irrigation_mon <- irrigation_day %>%
group_by(year, month, type) %>%
summarize(irrigation_in_mon = sum(irrigation_in)) %>%
ungroup()
View(irrigation_mon)
irrigation_season <- irrigation_day %>%
subset(month > 4 & month < 11) %>%
group_by(year, type) %>%
summarize(irrigation_in_season = sum(irrigation_in)) %>%
ungroup()
irrigation_yr <- irrigation_day %>%
group_by(year, type) %>%
summarize(irrigation_in_yr = sum(irrigation_in)) %>%
ungroup()
View(irrigation_season)
View(irrigation_yr)
ggplot(irrigation_day, x = factor(date), y = irrigation_in, fill=type, color = type) + geom_bar(stat = "identity")
ggplot(data = irrigation_day, x = factor(date), y = irrigation_in, fill=type, color = type) + geom_bar(stat = "identity")
ggplot(data = irrigation_wk, x = factor(week), y = irrigation_in, fill=type, color = type) + geom_bar(stat = "identity")
ggplot(data = irrigation_wk, y = irrigation_in, fill=type, color = type) + geom_bar(stat = "identity")
ggplot(data = irrigation_day, aes(x = factor(date), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity")
ggplot(subset(irrigation_day, month > 4 & month < 11), aes(x = factor(date), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity")
ggplot(subset(irrigation_day, month > 4 & month < 11), aes(x = factor(date), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity") + facet_grid(~year)
ggplot(subset(irrigation_wk, month > 4 & month < 11), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity") + facet_grid(~year)
irrigation_day <- temp_precip_day %>%
mutate(type = "precip") %>%
rename(irrigation_in = precip_in) %>%
dplyr::select('date','year','month','week','type','irrigation_in') %>%
rbind(drip_irrigation)
irrigation_wk <- irrigation_day %>%
group_by(year, month, week, type) %>%
summarize(irrigation_in = sum(irrigation_in)) %>%
ungroup()
irrigation_mon <- irrigation_day %>%
group_by(year, month, type) %>%
summarize(irrigation_in = sum(irrigation_in)) %>%
ungroup()
irrigation_season <- irrigation_day %>%
subset(month > 4 & month < 11) %>%
group_by(year, type) %>%
summarize(irrigation_in = sum(irrigation_in)) %>%
ungroup()
irrigation_yr <- irrigation_day %>%
group_by(year, type) %>%
summarize(irrigation_in = sum(irrigation_in)) %>%
ungroup()
ggplot(subset(irrigation_wk, month > 4 & month < 11), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity") + facet_grid(~year)
ggplot(subset(irrigation_day, month > 4 & month < 11 & year = 2023), aes(x = factor(date), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity")
ggplot(subset(irrigation_day, month > 4 & month < 11 & year == 2023), aes(x = factor(date), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity")
ggplot(subset(irrigation_day, month > 4 & month < 11 & year == 2024), aes(x = factor(date), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity")
ggplot(subset(irrigation_day, month > 4 & month < 11 & year == 2023), aes(x = factor(date), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity")
ggplot(subset(irrigation_day, month > 4 & month < 11 & year == 2024), aes(x = factor(date), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity")
# weekly
ggplot(subset(irrigation_wk, month > 4 & month < 11), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge") + facet_grid(~year)
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2023), aes(x = factor(date), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2023), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2024), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_mon, month > 4 & month < 11 & year == 2023), aes(x = factor(month), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_mon, month > 4 & month < 11 & year == 2024), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_mon, month > 4 & month < 11 & year == 2024), aes(x = factor(month), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
# season
ggplot(subset(irrigation_season, month > 4 & month < 11), aes(x = factor(year), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
# season
ggplot(irrigation_season, aes(x = factor(year), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
View(irrigation_wk)
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2023), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2024), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_mon, month > 4 & month < 11 & year == 2023), aes(x = factor(month), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2023), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2024), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
View(irrigation_wk)
View(irrigation_season)
# weekly
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2023), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity")
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2024), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity")
# weekly
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2023), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2024), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
View(drip_irrigation)
ggplot(subset(irrigation_mon, month > 4 & month < 11 & year == 2024), aes(x = factor(month), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_mon, month > 4 & month < 11 & year == 2023), aes(x = factor(month), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_mon, month > 4 & month < 11 & year == 2024), aes(x = factor(month), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2023), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
ggplot(subset(irrigation_wk, month > 4 & month < 11 & year == 2024), aes(x = factor(week), y = irrigation_in, fill=type, color = type)) + geom_bar(stat = "identity", position = "dodge")
View(soil_vwc)
soil_vwc <- soil_vwc %>%
dplyr::select('sample_date', 'block','plot', 'treatment', 'crop',
'bed_location', 'vwc_percent', 'period', 'EC')  %>%
mutate(sample_date = lubridate::as_date(sample_date,
format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymd(sample_date))) %>%
mutate(month = lubridate::month(sample_date)) %>%
mutate_at(c('block', 'plot', 'treatment', 'crop', 'bed_location'),
as.factor)
soil_vwc <- read.csv(here::here("00-data", "b-prepared",
"20250530_SCM-soil-moisture.csv"),
header = TRUE)
soil_vwc <- soil_vwc %>%
dplyr::select('sample_date', 'block','plot', 'treatment', 'crop',
'bed_location', 'vwc_percent', 'period', 'EC')  %>%
mutate(sample_date = lubridate::as_date(sample_date,
format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymd(sample_date)),
month = lubridate::month(sample_date),
week = lubridate::isoweek(ymd(date))) %>%
mutate_at(c('block', 'plot', 'treatment', 'crop', 'bed_location'),
as.factor)
soil_vwc <- soil_vwc %>%
dplyr::select('sample_date', 'block','plot', 'treatment', 'crop',
'bed_location', 'vwc_percent', 'period', 'EC')  %>%
mutate(sample_date = lubridate::as_date(sample_date,
format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymd(sample_date)),
month = lubridate::month(sample_date),
week = lubridate::isoweek(ymd(sample_date))) %>%
mutate_at(c('block', 'plot', 'treatment', 'crop', 'bed_location'),
as.factor)
ggplot(soil_vwc, aes(x = treatment, y = vwc_percent, fill = location)) + geom_boxplot() + facet_grid(~crop)
View(soil_vwc)
ggplot(soil_vwc, aes(x = treatment, y = vwc_percent, fill = bed_location)) + geom_boxplot() + facet_grid(~crop)
soil_vwc <- read.csv(here::here("00-data", "b-prepared",
"20250530_SCM-soil-moisture.csv"),
header = TRUE)
soil_vwc <- soil_vwc %>%
dplyr::select('sample_date', 'block','plot', 'treatment', 'crop',
'bed_location', 'vwc_percent', 'period', 'EC')  %>%
mutate(sample_date = lubridate::as_date(sample_date,
format = "%m/%d/%Y")) %>%
mutate(year = lubridate::isoyear(ymd(sample_date)),
month = lubridate::month(sample_date),
week = lubridate::isoweek(ymd(sample_date))) %>%
mutate_at(c('block', 'plot', 'treatment', 'crop', 'bed_location'),
as.factor)
ggplot(soil_vwc, aes(x = treatment, y = vwc_percent, fill = bed_location)) + geom_boxplot() + facet_grid(~crop)
soil_vwc <- read.csv(here::here("00-data", "b-prepared",
"20250530_SCM-soil-moisture.csv"),
header = TRUE)
soil_vwc <- soil_vwc %>%
dplyr::select('sample_date', 'block','plot', 'treatment', 'crop',
'bed_location', 'vwc_percent', 'period', 'EC')  %>%
mutate(sample_date = lubridate::as_date(sample_date,
format = "%m/%d/%Y"),
year = lubridate::isoyear(ymd(sample_date)),
month = lubridate::month(sample_date),
week = lubridate::isoweek(ymd(sample_date)),
bed_location = ifelse(bed_location == "hose", "center", bed_location)) %>%
mutate_at(c('block', 'plot', 'treatment', 'crop', 'bed_location'),
as.factor)
ggplot(soil_vwc, aes(x = treatment, y = vwc_percent, fill = bed_location)) + geom_boxplot() + facet_grid(~crop)
ggplot(soil_vwc, aes(x = treatment, y = vwc_percent, fill = bed_location)) + geom_boxplot() + facet_grid(~crop)
ggplot(soil_vwc, aes(x = crop, y = vwc_percent, fill = bed_location)) + geom_boxplot() + facet_grid(~treatment)
ggplot(soil_vwc, aes(x = treatment, y = vwc_percent, fill = crop)) + geom_boxplot()
ggplot(soil_vwc, aes(x = treatment, y = vwc_percent, fill = crop)) + geom_boxplot()  facet_grid(~year)
ggplot(soil_vwc, aes(x = treatment, y = vwc_percent, fill = crop)) + geom_boxplot() + facet_grid(~year)
ggplot(subset(soil_vwc, bed_location == "center"), aes(x = treatment, y = vwc_percent, fill = crop)) + geom_boxplot() + facet_grid(~year)
ggplot(subset(soil_vwc, bed_location == "edge"), aes(x = treatment, y = vwc_percent, fill = crop)) + geom_boxplot() + facet_grid(~year)
ggplot(subset(soil_vwc, bed_location == "edge"), aes(x = crop, y = vwc_percent, fill = treatment)) + geom_boxplot() + facet_grid(~year)
ggplot(subset(soil_vwc, bed_location == "center"), aes(x = crop, y = vwc_percent, fill = treatment)) + geom_boxplot() + facet_grid(~year)
ggplot(soil_vwc, aes(x = treatment, y = vwc_percent, fill = bed_location)) + geom_boxplot() + facet_grid(~crop)
ggplot(soil_vwc, aes(x = crop, y = vwc_percent, fill = bed_location)) + geom_boxplot() + facet_grid(~treatment)
ggplot(subset(soil_vwc, bed_location == "center"), aes(x = crop, y = vwc_percent, fill = treatment)) + geom_boxplot() + facet_grid(~year)
ggplot(subset(soil_vwc, bed_location == "edge"), aes(x = crop, y = vwc_percent, fill = treatment)) + geom_boxplot() + facet_grid(~year)
ggplot(subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) + geom_line() + facet_wrap(~crop + year)
ggplot(subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) + geom_smooth(method = "loess") + facet_wrap(~crop + year)
ggplot(subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) + geom_point() + geom_smooth(method = "loess") + facet_wrap(~crop + year)
ggplot(subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) + geom_point(size = 1) + geom_smooth(method = "loess", se = FALSE) + facet_wrap(~crop + year)
ggplot(subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) + geom_point(size = 1) + geom_smooth(method = "loess", se = FALSE) + facet_wrap(~year + crop)
ggplot(subset(soil_vwc, bed_location == "edge"), aes(x = week, y = vwc_percent, color = treatment)) + geom_point(size = 1) + geom_smooth(method = "loess", se = FALSE) + facet_wrap(~year + crop)
soil_vwc_trt <- soil_vwc %>%
group_by("treatment", "crop", "bed_location", "date", "week", "month", "year") %>%
summarize(vwc_per_wk = mean(vwc_percent)) %>%
ungroup()
ggplot()
ggplot() +
geom_point(subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment, size = 0.75)) +
geom_line(subset(soil_vwc_trt, bed_location == "center"), aes(x = week, y = vwc_per_wk, color = treatment)) +
facet_wrap(~year + crop)
ggplot() +
geom_point(subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) +
geom_line(subset(soil_vwc_trt, bed_location == "center"), aes(x = week, y = vwc_per_wk, color = treatment)) +
facet_wrap(~year + crop)
ggplot() +
geom_point(subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) +
geom_line(subset(soil_vwc_trt, bed_location == "center"), aes(x = week, y = vwc_per_wk, color = treatment)) +
facet_wrap(~year + crop)
ggplot() +
geom_point(subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment))
ggplot() +
geom_point(soil_vwc, aes(x = week, y = vwc_percent, color = treatment))
View(soil_vwc)
ggplot() +
geom_point(data = subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment))
ggplot() +
geom_point(data = subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) +
geom_line(subset(data = soil_vwc_trt, bed_location == "center"), aes(x = week, y = vwc_per_wk, color = treatment)) +
facet_wrap(~year + crop)
View(soil_vwc_trt)
soil_vwc_trt <- soil_vwc %>%
group_by("treatment") %>%
summarize(vwc_per_wk = mean(vwc_percent)) %>%
ungroup()
View(soil_vwc_trt)
soil_vwc_trt <- soil_vwc %>%
group_by(treatment, crop, bed_location, date, week, month, year) %>%
summarize(vwc_per_wk = mean(vwc_percent)) %>%
ungroup()
soil_vwc_trt <- soil_vwc %>%
group_by(treatment, crop, bed_location, sample_date, week, month, year) %>%
summarize(vwc_per_wk = mean(vwc_percent)) %>%
ungroup()
View(soil_vwc_trt)
# I need to change the aesthetics so that the air temperature is a dashed, gray line
ggplot() +
geom_line(data = subset(soil_temp_trt, study_yr == 1), aes(x = date, y = trt_avg, color = treatment)) +
geom_line(data = subset(temp_precip_day, (year == "2023" & month > 4) | (year == "2024" & month < 5)),
aes(x = date, y = avg_temp_C)) +
theme_bw()
ggplot() +
geom_point(data = subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) +
geom_line(subset(data = soil_vwc_trt, bed_location == "center"), aes(x = week, y = vwc_per_wk, color = treatment)) +
facet_wrap(~year + crop)
View(soil_vwc_trt)
ggplot() +
geom_point(data = subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment))
ggplot() +
geom_point(data = subset(soil_vwc, bed_location == "center"), aes(x = week, y = vwc_percent, color = treatment)) +
geom_line(subset(data = soil_vwc_trt, bed_location == "center"), aes(x = week, y = vwc_per_wk, color = treatment)) +
facet_wrap(~year + crop)
View(soil_vwc_trt)
